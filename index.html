<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shivam Milk Dairy</title>

<style>
body{margin:0;font-family:Arial;background:#eee}
.app{max-width:430px;margin:auto;background:#fff;min-height:100vh;padding:10px}
input,select,button{width:100%;padding:10px;margin:6px 0;font-size:14px}
button{border:none;border-radius:5px;color:#fff}
.green{background:green}
.red{background:red}
.card{background:#f1f1f1;padding:10px;margin-top:10px;border-radius:8px}
img{width:100%;border-radius:8px;margin-top:5px}
table{width:100%;border-collapse:collapse;font-size:12px;margin-top:10px}
th,td{border:1px solid #000;padding:4px;text-align:center}
.totalBox{background:#e0ffe0;padding:8px;font-weight:bold;margin-top:10px}
</style>
</head>

<body>
<div class="app">

<h3>üêÑ Shivam Milk Dairy üêÉ</h3>

<h4>‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä (‡§è‡§ï ‡§¨‡§æ‡§∞)</h4>
<input id="name" placeholder="‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§ï‡§æ ‡§®‡§æ‡§Æ">
<input id="village" placeholder="‡§ó‡§æ‡§Å‡§µ ‡§ï‡§æ ‡§®‡§æ‡§Æ">

<select id="milkType">
<option value="">‡§¶‡•Ç‡§ß ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
<option value="‡§ó‡§æ‡§Ø">üêÑ ‡§ó‡§æ‡§Ø</option>
<option value="‡§≠‡•à‡§Ç‡§∏">üêÉ ‡§≠‡•à‡§Ç‡§∏</option>
</select>

<label>‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§ï‡§æ ‡§´‡•ã‡§ü‡•ã üì∑</label>
<input type="file" id="custPhoto" accept="image/*" capture="environment">

<button class="green" onclick="saveCustomer()">‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>

<!-- ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ -->
<div id="customerBox"></div>

<hr>

<h4>‡§Ü‡§ú ‡§ï‡•Ä ‡§¶‡•Ç‡§ß ‡§è‡§Ç‡§ü‡•ç‡§∞‡•Ä</h4>
<input type="date" id="date">
<input id="qty" type="number" placeholder="‡§¶‡•Ç‡§ß (‡§≤‡•Ä‡§ü‡§∞)">
<input id="rate" type="number" placeholder="‡§∞‡•á‡§ü ‚Çπ ‡§™‡•ç‡§∞‡§§‡§ø ‡§≤‡•Ä‡§ü‡§∞">
<input id="milkTotal" readonly placeholder="‡§¶‡•Ç‡§ß ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§">

<input id="amount" type="number" placeholder="‡§Ü‡§ú ‡§¶‡§ø‡§Ø‡§æ ‡§™‡•à‡§∏‡§æ">
<input id="advance" type="number" placeholder="‡§è‡§°‡§µ‡§æ‡§Ç‡§∏">

<button class="green" onclick="saveDaily()">‡§Ü‡§ú ‡§ï‡•Ä ‡§è‡§Ç‡§ü‡•ç‡§∞‡•Ä ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>

<div class="totalBox">
‡§ï‡•Å‡§≤ ‡§≤‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§™‡•à‡§∏‡§æ ‚Çπ <span id="totalMoney">0</span>
</div>

<table id="table">
<tr>
<th>‡§§‡§æ‡§∞‡•Ä‡§ñ</th><th>‡§≤‡•Ä‡§ü‡§∞</th><th>‡§∞‡•á‡§ü</th>
<th>‡§¶‡•Ç‡§ß ‡§ï‡•Ä‡§Æ‡§§</th><th>‡§¶‡§ø‡§Ø‡§æ</th><th>‡§è‡§°‡§µ‡§æ‡§Ç‡§∏</th><th>‡§°‡§ø‡§≤‡•Ä‡§ü</th>
</tr>
</table>

</div>

<script>
let customer = JSON.parse(localStorage.getItem("customer")) || null;
let data = JSON.parse(localStorage.getItem("dailyData")) || [];

qty.oninput = rate.oninput = ()=>{
 milkTotal.value=(qty.value||0)*(rate.value||0);
};

function saveCustomer(){
 let file=custPhoto.files[0];
 if(!file){alert("‡§´‡•ã‡§ü‡•ã ‡§≤‡•á‡§Ç");return;}
 let reader=new FileReader();
 reader.onload=()=>{
  customer={
   name:name.value,
   village:village.value,
   milkType:milkType.value,
   photo:reader.result
  };
  localStorage.setItem("customer",JSON.stringify(customer));
  showCustomer();
  alert("‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‚úÖ");
 };
 reader.readAsDataURL(file);
}

function showCustomer(){
 if(!customer)return;
 customerBox.innerHTML=`
 <div class="card">
 <b>‡§®‡§æ‡§Æ:</b> ${customer.name}<br>
 <b>‡§ó‡§æ‡§Å‡§µ:</b> ${customer.village}<br>
 <b>‡§¶‡•Ç‡§ß:</b> ${customer.milkType}
 <img src="${customer.photo}">
 </div>`;
}

function saveDaily(){
 if(!customer){alert("‡§™‡§π‡§≤‡•á ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç");return;}
 let e={
  date:date.value,
  qty:+qty.value,
  rate:+rate.value,
  milkTotal:+milkTotal.value,
  amount:+amount.value||0,
  advance:+advance.value||0
 };
 data.push(e);
 localStorage.setItem("dailyData",JSON.stringify(data));
 loadTable();
}

function loadTable(){
 table.innerHTML=`<tr>
 <th>‡§§‡§æ‡§∞‡•Ä‡§ñ</th><th>‡§≤‡•Ä‡§ü‡§∞</th><th>‡§∞‡•á‡§ü</th>
 <th>‡§¶‡•Ç‡§ß ‡§ï‡•Ä‡§Æ‡§§</th><th>‡§¶‡§ø‡§Ø‡§æ</th><th>‡§è‡§°‡§µ‡§æ‡§Ç‡§∏</th><th>‡§°‡§ø‡§≤‡•Ä‡§ü</th>
 </tr>`;
 let total=0;
 data.forEach((d,i)=>{
  total+=d.amount+d.advance;
  let r=table.insertRow();
  r.insertCell(0).innerText=d.date;
  r.insertCell(1).innerText=d.qty;
  r.insertCell(2).innerText="‚Çπ"+d.rate;
  r.insertCell(3).innerText="‚Çπ"+d.milkTotal;
  r.insertCell(4).innerText="‚Çπ"+d.amount;
  r.insertCell(5).innerText="‚Çπ"+d.advance;
  r.insertCell(6).innerHTML=
   `<button class="red" onclick="del(${i})">‡§°‡§ø‡§≤‡•Ä‡§ü</button>`;
 });
 totalMoney.innerText=total;
}

function del(i){
 if(confirm("‡§è‡§Ç‡§ü‡•ç‡§∞‡•Ä ‡§π‡§ü‡§æ‡§è‡§Å?")){
  data.splice(i,1);
  localStorage.setItem("dailyData",JSON.stringify(data));
  loadTable();
 }
}

showCustomer();
loadTable();
</script>

</body>
  </html>
